{"version":3,"file":"static/js/691.fd52ba51.chunk.js","mappings":"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","sources":["utils/index.js","webpack://my-app/./src/pages/scss/particulars.module.scss?c84c","pages/Particulars.jsx"],"sourcesContent":["export function toFixed(num, length) {\r\n  const _rnd = length ? Math.pow(10, length) : 100000;\r\n  const n = num | 0;\r\n  const dec = num - n;\r\n  let fixed = num;\r\n  if (dec) {\r\n    const r = ((dec * _rnd + (num < 0 ? -0.5 : 0.5) | 0) / _rnd);\r\n    const t = r | 0;\r\n    const str = r.toString();\r\n    const decStr = str.split('.')[1] || '';\r\n    fixed = `${num < 0 && !(n + t) ? '-' : ''}${n + t}.${decStr}`;\r\n  }\r\n  return parseFloat(fixed);\r\n}\r\n//判断用户的滚动方向\r\nexport function scrollGate(callback) {\r\n  let before = 0;\r\n\r\n  return function () {\r\n    const current = scrollTop(window);\r\n    const delta = current - before;\r\n\r\n    if (delta >= 0) {\r\n      callback && callback('down');\r\n    } else {\r\n      callback && callback('up');\r\n    }\r\n\r\n    before = current;\r\n  };\r\n}\r\n//映射函数\r\nexport function map (s, a1, a2, b1, b2) {\r\n  return ((s - a1) / (a2 - a1)) * (b2 - b1) + b1\r\n}\r\n\r\nconst isWindow = obj => {\r\n  const toString = Object.prototype.toString.call(obj);\r\n  return toString === '[object global]' || toString === '[object Window]' || toString === '[object DOMWindow]';\r\n};\r\n//scrollTop兼容函数  滚动的scrollTop映射到了时间轴\r\nexport const scrollTop = (ele, target) => {\r\n  const isWin = isWindow(ele);\r\n  const y =\r\n    window.pageYOffset !== undefined ?\r\n      window.pageYOffset :\r\n      (document.documentElement || document.body.parentNode || document.body).scrollTop;\r\n\r\n  if (typeof target === 'number' && !isNaN(target)) {\r\n    if (isWin) {\r\n      document.documentElement.scrollTop = target;\r\n      document.body.scrollTop = target;\r\n    } else {\r\n      ele.scrollTop = target;\r\n    }\r\n  }\r\n\r\n  return isWin ? y : ele.scrollTop;\r\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"particulars_container__vNy-O\",\"box\":\"particulars_box__Z6K2l\"};","import React, { useLayoutEffect, useRef,createRef } from 'react';\r\nimport { scrollTop, scrollGate, toFixed, map } from '../utils/index';\r\nimport style from  './scss/particulars.module.scss'\r\nexport default function Particulars() {\r\n  const componentReference = useRef({\r\n    animationData: [\r\n      { key: 'left', defaultValue: 100, currentValue: 100, target: 800, duration: 2000, startTime: 0 },\r\n      { key: 'opacity', defaultValue: .5, currentValue: .5, target: 1, duration: 1000, startTime: 1000 },\r\n      { key: 'rotateX', defaultValue: 0, currentValue: 1, target: 270, duration: 1000, startTime: 2000 },\r\n      { key: 'rotateY', defaultValue: 0, currentValue: 1, target: 180, duration: 1000, startTime: 2000 },\r\n    ],\r\n    status: 'start',\r\n    currentTime: 0,\r\n    endTime: 0,\r\n    perTime: 1000 / 60,\r\n    reverse: false,\r\n    target: null\r\n  });\r\n  \r\n  const cRef = componentReference.current;\r\n  \r\n  function _linear (t, b, _c, d) {\r\n    var c = _c - b;\r\n    return c * t / d + b;\r\n  }\r\n  \r\n  function _render () {\r\n    if (cRef.status === 'running') {\r\n      cRef.currentTime = Math.max(map(scrollTop(window), 0, document.body.scrollHeight - window.innerHeight, 0, cRef.endTime), 0);\r\n    }\r\n  \r\n    if (cRef.status === 'start') {\r\n      cRef.currentTime = 0;\r\n    }\r\n  \r\n    if (cRef.status === 'ended') {\r\n      cRef.currentTime = cRef.endTime;\r\n    }\r\n  \r\n    cRef.animationData.forEach(item => {\r\n      const { startTime, duration, defaultValue, target } = item;\r\n      if (cRef.currentTime >= startTime && cRef.currentTime <= startTime + duration) {\r\n        let calcValue = _linear(cRef.currentTime - startTime, defaultValue, target, duration);\r\n        item.currentValue = toFixed(calcValue);\r\n      }\r\n      \r\n      if (cRef.currentTime < startTime) {\r\n        item.currentValue = defaultValue;\r\n      }\r\n    });\r\n  \r\n    cRef.target.style.left = cRef.animationData[0].currentValue + 'px';\r\n    cRef.target.style.opacity = cRef.animationData[1].currentValue;\r\n    cRef.target.style.transform = `rotateX(${cRef.animationData[2].currentValue}deg) rotateY(${cRef.animationData[3].currentValue}deg)`;\r\n  }\r\n  \r\n  function _scrollHandler (dir) {\r\n    if (dir === 'down') {\r\n      cRef.reverse = false;\r\n      if (cRef.currentTime < cRef.endTime) {\r\n        cRef.status = 'running';\r\n      } else {\r\n        cRef.status = 'ended'\r\n      }\r\n    } \r\n  \r\n    if (dir === 'up') {\r\n      cRef.reverse = true;\r\n      if (cRef.currentTime > 0) {\r\n        cRef.status = 'running';\r\n      } else {\r\n        cRef.status = 'start';\r\n      }\r\n    }\r\n  \r\n    window.requestAnimationFrame(_render);//js实现一个无限循环的动画\r\n  }\r\n  \r\n  useLayoutEffect(() => {\r\n    const myDiv = document.querySelector('#box');\r\n    cRef.target = myDiv;//触发事件的真实元素\r\n    cRef.animationData.forEach(item => {\r\n      const { duration, startTime } = item;\r\n      cRef.endTime = Math.max(duration + startTime, cRef.endTime);\r\n    });\r\n  \r\n    const scrollHandler = scrollGate(_scrollHandler)\r\n  \r\n    window.addEventListener('scroll', scrollHandler);\r\n    return () => {\r\n      window.removeEventListener('scroll', scrollHandler);\r\n    }\r\n  }, []);\r\n  \r\n  return (\r\n    <div className='table-list'>\r\n    <div className={style.container}>\r\n      <div id=\"box\" className={style.box} />\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["scrollTop","ele","target","isWin","obj","toString","Object","prototype","call","isWindow","y","undefined","window","pageYOffset","document","documentElement","body","parentNode","isNaN","Particulars","cRef","useRef","animationData","key","defaultValue","currentValue","duration","startTime","status","currentTime","endTime","perTime","reverse","current","_render","s","a1","a2","b1","b2","Math","max","scrollHeight","innerHeight","forEach","item","t","b","calcValue","num","length","_rnd","pow","n","dec","fixed","r","decStr","split","parseFloat","toFixed","style","left","opacity","transform","_scrollHandler","dir","requestAnimationFrame","useLayoutEffect","myDiv","querySelector","scrollHandler","callback","before","scrollGate","addEventListener","removeEventListener","className","id"],"sourceRoot":""}